# 📑 목차
- [🔐 ACLs (Access Control Lists)](#-acls-access-control-lists)
  - [개념](#-개념)
  - [ACL 종류](#-acl-종류)
  - [Standard ACL 예시](#-standard-acl-예시)
  - [Extended ACL 예시](#-extended-acl-예시)
  - [관리/운영 명령어](#-관리운영-명령어)
  - [ACL 요약](#-acl-요약)
- [🌐 NAT (Network Address Translation)](#-nat-network-address-translation)
  - [개념](#-개념-1)
  - [용어](#-용어)
  - [Static NAT](#-static-nat-고정-11-매핑)
  - [Dynamic NAT](#-dynamic-nat-풀-기반-11-매핑)
  - [NAT Overload (PAT)](#-nat-overload-pat-port-address-translation)
  - [확인 및 트러블슈팅](#-확인-및-트러블슈팅)
  - [NAT 요약](#-nat-요약)


# 🔐 ACLs (Access Control Lists) & 🌐 NAT (Network Address Translation) 정리

## 1) ACLs (Access Control Lists)

### 📌 개념
- 라우터/스위치를 통과하는 트래픽을 `permit` / `deny` 규칙으로 제어하는 도구  
- **상태 비저장(stateless)**, 규칙은 **위 → 아래** 순서로 검사 후 첫 매칭 적용  
- 맨 마지막에는 자동으로 **deny any** 가 존재  

### 📌 ACL 종류
- **Standard ACL (1–99, 1300–1999)**  
  - 소스 IP 기준으로만 필터링  
- **Extended ACL (100–199, 2000–2699)**  
  - 소스/목적지 IP, 프로토콜, 포트까지 세밀하게 제어 가능  

#### 배치 원칙
- **Standard ACL** → 목적지 가까이에 적용  
- **Extended ACL** → 출발지 가까이에 적용  

### 📌 Standard ACL 예시
```cisco
! 10.0.20.0/24 네트워크 허용
access-list 10 permit 10.0.20.0 0.0.0.255

interface g0/1
 ip access-group 10 in
```

### 📌 Extended ACL 예시
```cisco
ip access-list extended WEB_FILTER
 10 deny tcp 10.0.20.0 0.0.0.255 host 10.0.10.10 eq 80
 20 permit ip any any
!
interface g0/1
 ip access-group WEB_FILTER in
```

### 📌 관리/운영 명령어
```cisco
show access-lists
show ip interface
show ip access-lists
```

### ✅ ACL 요약
- **ACL** : 트래픽 필터링 기능  
  - Standard = 소스 IP 기준 (목적지 가까이)  
  - Extended = 소스/목적지 + 프로토콜/포트 기준 (출발지 가까이)  
- 규칙은 **위에서 아래 순서대로 적용**, 첫 매칭 후 종료  
- 마지막에는 항상 **deny any**  

---

## 2) NAT (Network Address Translation)

### 📌 개념
- 사설 IP ↔ 공인 IP 변환  
- IPv4 주소 부족 해결 + 내부 네트워크 은닉  
- 인터페이스 역할 지정 필요:  
  - `ip nat inside` → 내부 네트워크 방향  
  - `ip nat outside` → 외부 네트워크 방향  

### 📌 용어
- **Inside local** : 내부 사설 IP (예: 192.168.1.10)  
- **Inside global** : 외부에서 보이는 내부의 공인 IP (예: 198.51.100.10)  

### 📌 NAT 종류

#### 🔹 Static NAT (고정 1:1 매핑)
- 내부 → 외부 IP가 고정적으로 매핑  
- 주로 내부 서버를 외부에 공개할 때 사용  

```cisco
! 내부 서버 192.168.1.10 → 공인 198.51.100.10
ip nat inside source static 192.168.1.10 198.51.100.10
```

#### 🔹 Dynamic NAT (풀 기반 1:1 매핑)
- 공인 IP 풀에서 동적으로 할당  
- 동시에 사용할 수 있는 세션 수 = 풀 크기  

```cisco
! NAT 풀 정의
ip nat pool PUBLIC_POOL 198.51.100.100 198.51.100.110 netmask 255.255.255.0

! 내부 주소 대역 지정
access-list 1 permit 192.168.1.0 0.0.0.255

! NAT 매핑 적용
ip nat inside source list 1 pool PUBLIC_POOL
```

#### 🔹 NAT Overload (PAT, Port Address Translation)
- 가장 흔히 사용됨 (사무실/가정 공유기 방식)  
- 여러 내부 호스트가 하나의 공인 IP를 포트 번호로 구분해 공유  

```cisco
! 단일 공인 IP에 Overload 적용
access-list 1 permit 192.168.1.0 0.0.0.255
ip nat inside source list 1 interface g0/1 overload
```

```cisco
! 풀 + Overload 조합
ip nat pool PUBLIC_POOL 198.51.100.100 198.51.100.110 netmask 255.255.255.0
access-list 10 permit 192.168.1.0 0.0.0.255
ip nat inside source list 10 pool PUBLIC_POOL overload
```

### 📌 확인 및 트러블슈팅
```cisco
show ip nat translations
show ip nat statistics
debug ip nat
clear ip nat translation *
```

### ✅ NAT 요약
- **Static NAT** : 내부 서버를 외부에 고정 IP로 공개  
- **Dynamic NAT** : 공인 IP 풀에서 동적 할당  
- **NAT Overload (PAT)** : 가장 일반적, 다수의 내부 → 하나의 공인 IP 공유  
- 실습/현업에서 **가장 흔히 쓰는 방식**은 **PAT(NAT Overload)** 🚀
