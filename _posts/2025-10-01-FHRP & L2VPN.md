#  FHRP (First Hop Redundancy Protocol) & L2VPN 정리

##  FHRP (First Hop Redundancy Protocol)

###  개념
- 게이트웨이를 이중화하여 장애가 발생해도 네트워크 통신이 끊기지 않도록 하는 기술
- 기본적으로 여러 라우터/스위치 중 하나를 Active 로 두고, 장애 시 자동으로 다른 장비가 게이트웨이 역할을 수행

### 🔹 종류
1. **HSRP (Hot Standby Router Protocol)**
   - Cisco 전용 프로토콜
   - 가상 IP 주소를 사용하여 Active Router / Standby Router 개념으로 동작
   - 우선순위(기본 100)가 가장 높은 라우터가 Active 역할 수행

2. **VRRP (Virtual Router Redundancy Protocol)**
   - IETF 표준 프로토콜 (Cisco, Juniper 등 멀티벤더 지원)
   - Master / Backup 구조
   - 가상 라우터 IP를 통해 이중화 제공

3. **GLBP (Gateway Load Balancing Protocol)**
   - Cisco 독자 프로토콜
   - 단순한 이중화가 아니라, 트래픽 부하 분산(Load Balancing) 기능까지 제공
   - 여러 게이트웨이가 동시에 동작하며, 클라이언트별로 다른 게이트웨이를 지정 가능

---

##  FHRP 동작 방식

### 🔹 HSRP 구조 예시
```plaintext
          [ Host PC ]
          Default GW: 192.168.1.1 (가상 IP)
                 |
        ---------------------
        |                   |
 [Router1]               [Router2]
 (Active, 192.168.1.2)   (Standby, 192.168.1.3)

- Router1 장애 발생 시 → Router2가 Active로 승격
```

### 🔹 VRRP 구조 예시
```plaintext
          [ Host PC ]
          Default GW: 192.168.1.1 (가상 IP)
                 |
        ---------------------
        |                   |
 [Router1]               [Router2]
 (Master)                (Backup)

- Router1 장애 발생 시 → Router2가 Master로 승격
```

### 🔹 GLBP 구조 예시
```plaintext
          [ Host1 ]----+
          [ Host2 ]----+ Default GW: 192.168.1.1 (가상 IP)
          [ Host3 ]----+
                       |
        ---------------------------------------
        |                  |                  |
 [Router1]            [Router2]           [Router3]
 (Active Virtual GW)  (Backup1)           (Backup2)

- Host1 → Router1 게이트웨이 사용
- Host2 → Router2 게이트웨이 사용
- Host3 → Router3 게이트웨이 사용
(트래픽 부하분산 효과)
```

---

##  L2VPN (Layer 2 VPN)

###  개념
- L2(Frame 기반)를 터널링하는 VPN 기술
- MAC 프레임 단위의 통신을 ISP 망을 통해 다른 지점까지 연결하는 가상 사설망
- 마치 동일한 LAN 스위치에 연결된 것처럼 원거리 지점 간 L2 연결을 제공

### 🔹 특징
- Ethernet, Frame Relay, ATM 등의 L2 프로토콜을 투명하게 전달
- 기업 지사, 데이터센터 간 LAN 확장에 활용
- 대표 기술: VPLS (Virtual Private LAN Service), VPWS (Virtual Private Wire Service)

---

##  최종 요약
- **FHRP** : 게이트웨이 이중화 기술  
  - Cisco 전용 : HSRP, GLBP  
  - 표준 기반 : VRRP  
  - GLBP는 이중화 + 부하분산 제공  

- **L2VPN** : ISP 망을 통해 Layer 2 프레임을 터널링하여 원거리 지점 간 LAN 연결 지원
